<html>
	<head>
		<meta charset="utf-8">
		<title>blobs | cms</title>
		<style>
			body {
				font-family: "Verdana", Arial;
			}
		</style>
	</head>
	<body>
		<textarea id="query"></textarea><br />
		<button id="get-query">get</button>
		<button id="all-query">all</button>
		<button id="run-query">run</button>
		<h3>Result</h3>
		<div id="res">
		</div>
	</body>
	<script src="js/request.js"></script>
	<script>
		const session = (document.cookie.split(/; */).find(v => v.startsWith("session=")) || "").split("=")[1];
		function postQuery(method) {
			alert(method)
			return new Promise((res, rej) => {
				request("/api/execSQL?method=" + method, "POST", {
					session
				}).then(({responseText}) => {
					document.getElementById("res").innerHTML = responseText
					.replace(/</g, "&lt;")
					.replace(/>/g, "&gt;")
					.replace(/ /g, "&nbsp;")
					.replace(/\n/g, "<br/>");
				}).catch(console.log);
			});
		}

		for (const method of ["get", "all", "run"]) {
			document.getElementById(method + "-query").addEventListener("click", postQuery.bind(null, method));
		}
	</script>
</html>